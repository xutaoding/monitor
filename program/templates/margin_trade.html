{% extends "layout.html" %}

<!--{% load program_extra %}-->

{% block style %}
    <!--{% load static %}-->
    <link href="{% static 'css/base.css' %}" type="text/css" rel="stylesheet">
{% endblock %}

{% block navigation %}
    {% include "base.html" %}
{% endblock %}

{% block header %}
    <label>权益类与债券类大宗交易</label>
<div><a href="#" rel="drevil">
    <span class="glyphicon glyphicon-shopping-cart"> </span> dddd
</a></div>
{% endblock %}



{% block form %}
    <!--<form class="form-group" action="" method="GET">-->
    <form class="form-group" action="{% url 'program:margin_trade' %}" method="GET">
        <!--{% csrf_token %}-->
        <label class="label-box">股票代码: </label><input class="input-box" name="secu" value="{% if form.secu.value %}{{ form.secu.value }} {% endif %}">
        <label class="label-box">交易日期: </label><input class="input-box datepicker" name="y" value="{% if form.y.value %}{{ form.y.value }} {% else %} {% endif %}">


        <label class="label-box">交易类型: </label>
            <select class="input-box" name="typ">
                <option selected value="">全部</option>
                <option {% if form.typ.value == "szx_secu" %} selected {% endif %} value="szx_secu">szx_secu</option>
                <option {% if form.typ.value == "sha_secu" %} selected {% endif %} value="sha_secu">sha_secu</option>
                <option {% if form.typ.value == "szx_bond" %} selected {% endif %} value="szx_bond">szx_bond</option>
                <option {% if form.typ.value == "sha_bond" %} selected {% endif %} value="sha_bond">sha_bond</option>
        </select><br>
        <label class="label-box">创建时间: </label><input class="input-box datetimepicker" name="crt" value="{% if form.crt.value %}{{ form.crt.value }} {% endif %}">
        <label><input type="hidden" name="page" class="hidden-page" value="{{ queryset.number }}"></label>
        <input class="btn btn-default btn-sm" type="submit" value="查询">
    </form>
{% endblock %}


{% block content %}
    <table id="table-content" class="table table-striped table-bordered table-hover">
        <thead>
            <tr class="bg-success">
                <td>序号</td>
                <td>股票代码</td>
                <td>交易日期</td>
                <td>成交价</td>
                <td>成交量</td>
                <td>成交额</td>
                <td>disc</td>
                <td>ratio</td>
                <td>买入营业部</td>
                <td>卖出营业部</td>
                <td>货币</td>
                <td>创建时间</td>
            </tr>
        </thead>
        <tbody>
        {% for item in objects_list %}
        <tr>
            <td>{{ forloop.counter0|add:objects_list.start_index }}</td>
            <td>{{ item.secu }}</td>
            <td>{{ item.y }}</td>
            <td>{{ item.price }}</td>
            <td>{{ item.volu|currency_format }}</td>
            <td>{{ item.amou|currency_format }}</td>
            <td>{{ item.disc }}</td>
            <td>{{ item.ratio }}</td>
            <td>{{ item.buy }}</td>
            <td>{{ item.sale }}</td>
            <td>{{ item.c.en }}</td>
            <td>{{ item.crt|date:'Y-m-d H:i:s.u'|slice:':-3' }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block pagination %}
    {% include 'pagination.html' %}
{% endblock %}


{% block script %}
<script src="{% static 'js/base.js' %}"></script>
<script type="text/javascript">
    $('.datepicker').click(function(){
        $(this).datepicker({
            format: 'yyyy-mm-dd'
        });
    });

    $('.datetimepicker').click(function(){
        $(this).datetimepicker('show');
    });

    $('.link-paginate > a').click(function(){
        <!--alert(100);-->
        console.log(100);
        var secu = $('input[name="secu"]').val().trim(),
            y = $('input[name="y"]').val().trim(),
            typ = $('select[name="typ"]').val().trim(),
            crt = $('input[name="crt"]').val().trim();

        var page = $(this).attr('data-page');
        location.href = '?' + 'secu=' + secu + '&y=' + y + '&typ=' + typ + '&crt=' + crt + '&page=' + page;
    });
</script>
{% endblock %}

